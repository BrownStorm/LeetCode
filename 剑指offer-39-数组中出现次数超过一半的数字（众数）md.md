# 数组中出现次数超过一半的数字（众数）

数组中有一个数字出现的次数超过数组长度的一半，请找出这个数字。

你可以假设数组是非空的，并且给定的数组总是存在多数元素。

 

示例 1:

```
输入: [1, 2, 3, 2, 2, 2, 5, 4, 2]
输出: 2
```



## 思考

其实就是寻找“众数”。之前在学习快排的时候有学过，现将学习笔记摘录如下：

majority：在**无序**向量中，若有**一半以上**元素同为m，则称之为众数。
如在{3,5,2,3,3}中众数为3.
但在{3,5,2,3,3,4}中却不存在众数。

平凡算法：排序 + 扫描
但进一步的，若限制时间不超过O(n)，附加空间不超过O(1)呢？

不难验证，若众数存在，那众数必然为中位数。
同样的，只要能够找出中位数，我们就可以在线性时间内**验证**它是否是众数。
我们只需要遍历一趟数据集，再统计出目标元素的个数，即可验证。

![在这里插入图片描述](https://img-blog.csdnimg.cn/20210318152933680.png)

但是这个目标很难实现，所以我们需要找到一个更弱的，更容易实现的必要条件。



**减而治之**

我们想以某种安全的方式缩小问题的规模，将在A中寻找众数的问题变为在`A-P`中寻找众数的问题。
若在向量`A`的前缀`P`（`P`为偶数）中，元素x出现的次数恰占一半，则A有众数**仅当**，对应的后缀`A - P`有众数`m`，且`m`就是`A`的众数。

既然最终总要花费$O(n)$的时间通过一次线性扫描来确定候选者是否为众数。所以我们只需要考虑`A`的确含有众数`m`的情况。

 1. 若被剪除的元素`x == m`，则在排除前缀`P`之后，`m`与其它元素在数量上的差距保持不变（如：从浓度50+%的盐水中析出50%的一部分，剩余部分的浓度仍未50+%）
 2. 若 `x != m`，则在排除前缀`P`之后，m与其它元素在数量上的差距不致缩小（如：{1,3,2,3,3}-->{2,3,3}-->{3}）（剪除不是众数的x后众数m的优势反而会扩大）

![在这里插入图片描述](https://img-blog.csdnimg.cn/20210318160601206.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTMyNTAy,size_16,color_FFFFFF,t_70)

## 复杂度分析

时间复杂度：一次扫描即可，$O(N)$

空间复杂度：$O(1)$

