# 表示数值的字符串

请实现一个函数用来判断字符串是否表示数值（包括整数和小数）。

数值（按顺序）可以分成以下几个部分：

1. 若干空格

2. 一个 小数 或者 整数

3. （可选）一个 'e' 或 'E' ，后面跟着一个 整数

4. 若干空格

   

   

   

   

   

   

小数（按顺序）可以分成以下几个部分：

1. （可选）一个符号字符（'+' 或 '-'）

2. 下述格式之一： （1）至少一位数字，后面跟着一个点 '.'（2）至少一位数字，后面跟着一个点 '.' ，后面再跟着至少一位数字（3）一个点 '.' ，后面跟着至少一位数字

   

整数（按顺序）可以分成以下几个部分：

1. （可选）一个符号字符（'+' 或 '-'）
2. 至少一位数字



部分数值列举如下：

- ["+100", "5e2", "-123", "3.1416", "-1E-16", "0123"]

部分非数值列举如下：

- ["12e", "1a3.14", "1.2.3", "+-5", "12e+5.4"]

示例 1：

```
输入：s = "0"
输出：true
```

示例 2：

```
输入：s = "e"
输出：false


示例 3：

```
输入：s = "."
输出：false
```




示例 4：

```
输入：s = "    .1  "
输出：true
```



## 思路

本题使用有限状态机。根据字符类型和合法数值的特点，先定义状态，在画出状态转移图，最后填编写代码。

**字符类型：**

- 空格：" "
- 数字："0"-"9"
- 正负号："+"、"-"
- 小数点："."
- 幂符号："e"、"E"

**状态定义：**

按照地富川从左到右的顺序，定义一以下9种状态：

1. 开始的空格
2. 幂符号前的正负号
3. 小数点前的数字
4. 小数点、小数点后的数字
5. 当小数点前为空格时，小数点、小数点后的数字
6. 幂符号
7. 幂符号后的正负号
8. 幂符号后的数字
9. 结尾的空格



**结束状态：**

合法的结束状态有2、3、7、8

![image-20210510161717012](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20210510161717012.png)





**算法流程：**

1. 初始化：

状态转移表`states`：设`states[i]`，其中i为所处状态，`states[i]`使用哈希表存储可转移至的状态。键值对`(key,value)`表示：输入`key`可从`i`状态转移至`value`状态

当前状态为0

2. **状态转移循环：**遍历字符串`s`的每个字符`c`

如果c为以上字符则赋予**记录字符类型**`t`相应字符，否则赋予`'?'`表示输入错误，后续可返回`false`

终止条件：若字符类型`t`不在 哈希表`states[p]`中，说明无法转移至下一状态，因此返回`false`

状态转移：状态`p`转移至`states[p][t]`

返回值：若状态为2、3、7、8则结尾合法，返回`true`，否则返回`false`



## 复杂度分析

- 时间复杂度$O(N)$，N为字符串长度，判断需遍历字符串，每轮状态转移使用$O(1)$时间
- 空间复杂度$O(1)$，`states`和`p`使用常数大小的额外空间

