# 直线上最多的点数



## 思考



**哈希表**

我们可以考虑枚举所有的点，假设直线经过该点时，该直线所能经过的最多的点数。

假设我们当前枚举到点 `i`，如果直线同时经过另外两个不同的点`j`和`k`，那么可以发现点`i`和点`j`所连直线的斜率恰等于`i`点和点`k`所连直线的斜率。

于是我们可以统计其他所有点与点`i`所连直线的斜率，出现次数最多的斜率即为经过点数最多的直线的斜率，其经过的点数为该斜率出现的次数加一（点`i`自身也要被统计，所以最少是2）。



**如何计算斜率**

由于浮点数类型因为精度不够所以无法准确表示每一个斜率。所以我们采用由分子分母二元组的形式记录斜率。

我们使用`dx = x2 - x1`，`dy = y2 - y1`，表示分子分母，但是需要注意，因为当`dx == 0`或`dy == 0`时，因为这时`dy`或`dx`无论取和值（除了0）斜率都一样，所以需要规定，这时`dy = 1;`或`dx = 1;`

还需要注意，如果只含一个负数，则规定`dx`为负，`dy`为正；如果都为负则都改为正数。



## 复杂度分析

- 时间复杂度：$O(n^2 * logm)$，其中n为点的数量，m为横纵坐标差的最大值。最坏情况下我们需要枚举n个点，枚举单个点过程中需要进行$O(n)$次最小公约数计算，单词最小公约数计算时间复杂度为$O(logm)$，因此总时间为$O(n^2 * logm)$
- 空间复杂度，$O(n)$。主要为哈希表开销



